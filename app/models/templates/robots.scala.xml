@import utils._
@import models.SelectTaxYear._
@import models.OtherBenefit._
@import models.OtherCompanyBenefit._
@import models.OtherTaxableIncome._
@import models.InternationalAddress._
@import models.UkAddress._
@import models.AddressLookup._
@import models.AnyTaxPaid._
@import models.AnyAgentRef._
@import models.TelephoneOption._
@import play.api.i18n.Messages

@(userAnswers: UserAnswers)(implicit messages: Messages)
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ctr>
	<userDetails>
		<name>@userAnswers.userDetails.get.name</name>
		<nino>@userAnswers.userDetails.get.nino</nino>
	</userDetails>

	<claimSection>
		@userAnswers.selectTaxYear.map{ value =>
			<selectedTaxYear>@value.asString</selectedTaxYear>
		}
		@userAnswers.employmentDetails.map{ value =>
			<employmentDetails>@value</employmentDetails>
		}
		@userAnswers.enterPayeReference.map{ value =>
			<payeReference>@userAnswers.enterPayeReference</payeReference>
		}
		@userAnswers.detailsOfEmploymentOrPension.map{ value =>
			<detailsOfEmploymentOrPension>@userAnswers.detailsOfEmploymentOrPension</detailsOfEmploymentOrPension>
		}
	</claimSection>

	@if(userAnswers.anyBenefits.getOrElse(false)){
	<benefitSection>
		<anyBenefits>@userAnswers.anyBenefits</anyBenefits>
		<selectBenefits>@userAnswers.selectBenefits.get.mkString(", ")</selectBenefits>
		@userAnswers.howMuchBereavementAllowance.map{ value =>
			<howMuchBereavementAllowance>@value</howMuchBereavementAllowance>
		}
		@userAnswers.howMuchCarersAllowance.map { value =>
			<howMuchCarersAllowance>@value</howMuchCarersAllowance>
		}
		@userAnswers.howMuchJobseekersAllowance.map { value =>
			<howMuchJobseekersAllowance>@value</howMuchJobseekersAllowance>
		}
		@userAnswers.howMuchEmploymentAndSupportAllowance.map{ value =>
			<howMuchEmploymentAndSupportAllowance>@value</howMuchEmploymentAndSupportAllowance>
		}
		@userAnswers.howMuchIncapacityBenefit.map { value =>
			<howMuchIncapacityBenefit>@value</howMuchIncapacityBenefit>
		}
		@userAnswers.howMuchStatePension.map{ value =>
			<howMuchStatePension>@value</howMuchStatePension>
		}
		@userAnswers.otherBenefit.map{ value =>
			<otherBenefits>
				@OtherBenefit.toXml(value)
			</otherBenefits>
		}
	</benefitSection>
	}

	@if(userAnswers.anyCompanyBenefits.getOrElse(false)){
	<companyBenefitsSection>
		<anyCompanyBenefits>@userAnswers.anyCompanyBenefits</anyCompanyBenefits>
		<selectCompanyBenefits>@userAnswers.selectCompanyBenefits.get.mkString(", ")</selectCompanyBenefits>
		@userAnswers.howMuchCarBenefits.map{ value =>
			<howMuchCarBenefits>@value</howMuchCarBenefits>
		}
		@userAnswers.howMuchFuelBenefit.map{ value =>
			<howMuchFuelBenefit>@value</howMuchFuelBenefit>
		}
		@userAnswers.howMuchMedicalBenefits.map{ value =>
			<howMuchMedicalBenefits>@value</howMuchMedicalBenefits>
		}
		@userAnswers.otherCompanyBenefit.map{ value =>
			<otherCompanyBenefits>
				@OtherCompanyBenefit.toXml(value)
			</otherCompanyBenefits>
		}
	</companyBenefitsSection>
	}

	@if(userAnswers.anyTaxableIncome.getOrElse(false)){
	<taxableIncomeSection>
		<anyTaxableIncome>@userAnswers.anyTaxableIncome</anyTaxableIncome>
		<selectTaxableIncome>@userAnswers.selectTaxableIncome.get.mkString(", ")</selectTaxableIncome>
		@userAnswers.howMuchRentalIncome.map{ value =>
			<rentalIncome>
				<howMuch>@value</howMuch>
				@userAnswers.anyTaxableRentalIncome.map{ value =>
					@AnyTaxPaid.toXml(value)
				}
			</rentalIncome>
		}
		@userAnswers.howMuchBankInterest.map{ value =>
			<bankInterest>
				<howMuch>@value</howMuch>
				@userAnswers.anyTaxableBankInterest.map{ value =>
					@AnyTaxPaid.toXml(value)
				}
			</bankInterest>
		}
		@userAnswers.howMuchInvestmentOrDividend.map{ value =>
			<investmentOrDividend>
				<howMuch>@value</howMuch>
				@userAnswers.anyTaxableInvestments.map{ value =>
					@AnyTaxPaid.toXml(value)
				}
			</investmentOrDividend>
		}
		@userAnswers.howMuchForeignIncome.map{ value =>
			<foreignIncome>
				<howMuch>@value</howMuch>
				@userAnswers.anyTaxableForeignIncome.map{ value =>
					@AnyTaxPaid.toXml(value)
				}
			</foreignIncome>
		}
		@userAnswers.otherTaxableIncome.map{ value =>
			<otherTaxableIncome>
				@OtherTaxableIncome.toXml(value)
			</otherTaxableIncome>
		}
	</taxableIncomeSection>
	}

	<paymentSection>
		@userAnswers.whereToSendPayment.map{ value =>
			<whereToSendThePayment>@value</whereToSendThePayment>
		}
		@userAnswers.paymentAddressCorrect.map{ value =>
			<paymentAddressCorrect>@value</paymentAddressCorrect>
		}
		@userAnswers.nomineeFullName.map{ value =>
			<nomineeFullname>@value</nomineeFullname>
		}
		@userAnswers.anyAgentRef.map{ value =>
			@AnyAgentRef.toXml(value)
		}
		@userAnswers.isPaymentAddressInTheUK.map{ value =>
			<isPaymentAddressInTheUK>@value</isPaymentAddressInTheUK>
		}
		<paymentAddress>
			@userAnswers.paymentUKAddress.map{ value =>
				@UkAddress.toXml(value)
			}
			@userAnswers.paymentInternationalAddress.map{ value =>
				@InternationalAddress.toXml(value)
			}
			@userAnswers.paymentLookupAddress.map{ value =>
				@AddressLookup.toXml(value)
			}
		</paymentAddress>
	</paymentSection>

	<contactSection>
		@userAnswers.anyTelephoneNumber.map{ value =>
			@TelephoneOption.toXml(value)
		}
	</contactSection>
</ctr>
